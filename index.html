<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ultimate static showcase: Web Components, IndexedDB, Workers, Geo, Motion, Speech, Clipboard, Fullscreen, Battery, Network, D&D, Canvas, APIs, SVG/CSS Animations & more.">
    <meta name="author" content="AI Generated Demo">

    <title>Ultimate Static Showcase</title>

    <!-- Link to manifest (Create a manifest.json file) -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1a1a1a">

    <!-- ** CSS START ** -->
    <style>
        /* 1. Reset & Global Styles */
        :root {
            /* Colors */
            --color-primary: #007bff;
            --color-secondary: #6c757d;
            --color-success: #28a745;
            --color-danger: #dc3545;
            --color-warning: #ffc107;
            --color-info: #17a2b8;
            --color-light: #f8f9fa;
            --color-dark: #343a40;
            --color-text: #212529;
            --color-background: #ffffff;
            --color-border: #dee2e6;
            --color-link: var(--color-primary);
            --color-link-hover: #0056b3;
            --color-shadow: rgba(0, 0, 0, 0.1);
            --color-scrollbar-thumb: #adb5bd;
            --color-scrollbar-thumb-hover: #889097;
            --color-scrollbar-track: var(--color-light);
            --color-accent: #fd7e14; /* Orange accent */
            --color-accent-hover: #e97011;

            /* Typography */
            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            --font-size-base: 1rem;
            --line-height-base: 1.6;
            --h1-font-size: clamp(2rem, 1.625rem + 1.6667vw, 3rem);
            --h2-font-size: clamp(1.75rem, 1.4896rem + 1.1111vw, 2.5rem);
            --h3-font-size: clamp(1.3rem, 1.1354rem + 0.7111vw, 1.8rem);
            --h4-font-size: clamp(1.1rem, 0.9688rem + 0.5556vw, 1.5rem); /* Added H4 size */

            /* Spacing */
            --spacing-unit: 1rem;

            /* Transitions & Animations */
            --transition-speed: 0.3s;
            --transition-ease: ease-in-out;
            --animation-stagger-delay: 0.08s; /* Slightly faster stagger */

            /* Houdini @property Example */
            @property --gradient-angle {
              syntax: '<angle>';
              initial-value: 0deg;
              inherits: false;
            }
        }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { font-size: 100%; scroll-behavior: smooth; }
        body {
            font-family: var(--font-family-sans-serif); font-size: var(--font-size-base); line-height: var(--line-height-base); color: var(--color-text); background-color: var(--color-background); transition: background-color var(--transition-speed) var(--transition-ease), color var(--transition-speed) var(--transition-ease); display: flex; flex-direction: column; min-height: 100vh; overflow-x: hidden;
        }
        /* Custom Scrollbars */
        @supports (selector(::-webkit-scrollbar)) { body::-webkit-scrollbar { width: 10px; } body::-webkit-scrollbar-track { background: var(--color-scrollbar-track); } body::-webkit-scrollbar-thumb { background-color: var(--color-scrollbar-thumb); border-radius: 10px; border: 2px solid var(--color-scrollbar-track); } body::-webkit-scrollbar-thumb:hover { background-color: var(--color-scrollbar-thumb-hover); } }
        html { scrollbar-width: thin; scrollbar-color: var(--color-scrollbar-thumb) var(--color-scrollbar-track); }

        #app-container { display: flex; flex-direction: column; min-height: 100vh; }
        main { flex-grow: 1; width: 100%; max-width: 1200px; margin: 0 auto; padding: calc(var(--spacing-unit) * 1.5); }

        /* 2. Utilities & Components */
        .container { width: 100%; max-width: 1140px; margin: auto; padding: 0 var(--spacing-unit); }
        .text-center { text-align: center; }
        .visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
        .button { display: inline-flex; align-items: center; justify-content: center; gap: 0.4em; font-weight: 400; color: var(--color-light); text-align: center; vertical-align: middle; cursor: pointer; user-select: none; background-color: var(--color-primary); border: 1px solid var(--color-primary); padding: 0.5rem 1rem; font-size: var(--font-size-base); line-height: var(--line-height-base); border-radius: 0.25rem; transition: all var(--transition-speed) var(--transition-ease); text-decoration: none; }
        .button svg { width: 1em; height: 1em; fill: currentColor; } /* Style for icons in buttons */
        .button:hover { background-color: var(--color-link-hover); border-color: var(--color-link-hover); color: #fff; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(var(--rgb-primary), 0.2); }
        .button:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; box-shadow: 0 0 0 3px rgba(var(--rgb-primary), 0.3); }
        .button-secondary { background-color: var(--color-secondary); border-color: var(--color-secondary); }
        .button-secondary:hover { background-color: #5a6268; border-color: #545b62; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); }
        .button-secondary:focus-visible { outline-color: var(--color-secondary); box-shadow: 0 0 0 3px rgba(108, 117, 125, 0.3); }
        .button-accent { background-color: var(--color-accent); border-color: var(--color-accent); color: #fff; }
        .button-accent:hover { background-color: var(--color-accent-hover); border-color: var(--color-accent-hover); box-shadow: 0 4px 8px rgba(var(--rgb-accent), 0.25); }
        .button-accent:focus-visible { outline-color: var(--color-accent); box-shadow: 0 0 0 3px rgba(var(--rgb-accent), 0.3); }
        .button.small { padding: 0.3rem 0.7rem; font-size: 0.85rem; }
        .button:disabled { background-color: var(--color-secondary); border-color: var(--color-secondary); opacity: 0.65; cursor: not-allowed; transform: none; box-shadow: none; }
        .card { background-color: var(--color-background); border: 1px solid var(--color-border); border-radius: 0.3rem; box-shadow: 0 2px 5px var(--color-shadow); margin-bottom: var(--spacing-unit); padding: calc(var(--spacing-unit) * 1.25); transition: all var(--transition-speed) var(--transition-ease); }
        .card:hover { transform: translateY(-3px); box-shadow: 0 6px 12px var(--color-shadow); }
        .output-box { background-color: var(--color-light); border: 1px dashed var(--color-border); padding: var(--spacing-unit); margin-top: var(--spacing-unit); border-radius: 4px; font-family: var(--font-family-monospace); font-size: 0.9rem; transition: background-color var(--transition-speed) var(--transition-ease), border-color var(--transition-speed) var(--transition-ease); word-break: break-word; white-space: pre-wrap; max-height: 200px; overflow-y: auto;} /* Added max-height and scroll */
        .loading-indicator, .error-indicator, .info-indicator { text-align: center; padding: 1.5rem; font-style: italic; color: var(--color-secondary); }
        .error-indicator { color: var(--color-danger); font-weight: bold; }
        .status-indicator { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-left: 8px; vertical-align: middle; }
        .status-indicator.online { background-color: var(--color-success); box-shadow: 0 0 5px var(--color-success); }
        .status-indicator.offline { background-color: var(--color-danger); }

        /* 3. Header & Navigation */
        .app-header { background-color: var(--color-background); padding: var(--spacing-unit) 0; box-shadow: 0 2px 4px var(--color-shadow); position: sticky; top: 0; z-index: 1000; transition: background-color var(--transition-speed) var(--transition-ease); }
        .header-content { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
        .logo { font-size: 1.75rem; font-weight: bold; color: var(--color-primary); text-decoration: none; margin-right: var(--spacing-unit); transition: transform 0.2s ease-out; display: inline-flex; align-items: center;}
        .logo:hover { transform: scale(1.03); }
        .logo .icon { width: 30px; height: 30px; vertical-align: middle; margin-right: 8px; fill: none; stroke: currentColor; stroke-width: 5; transition: transform 0.3s ease-out; }
        .logo .icon .logo-path { stroke-dasharray: 240; stroke-dashoffset: 0; animation: logoDraw 3s ease-in-out infinite alternate; } /* SVG Animation */
        @keyframes logoDraw { 0% { stroke-dashoffset: 240; } 50% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: -240; } }
        .logo:hover .icon { transform: rotate(15deg); }

        .main-nav ul { list-style: none; display: flex; gap: calc(var(--spacing-unit) * 1.2); margin: 0; padding: 0; flex-wrap: wrap; }
        .main-nav a { text-decoration: none; color: var(--color-text); font-weight: 500; padding: 0.5rem 0; position: relative; transition: color var(--transition-speed) var(--transition-ease); }
        .main-nav a::after { content: ''; position: absolute; width: 0; height: 2px; bottom: 0; left: 50%; transform: translateX(-50%); background-color: var(--color-primary); transition: width var(--transition-speed) var(--transition-ease); }
        .main-nav a:hover, .main-nav a.active { color: var(--color-primary); }
        .main-nav a:hover::after, .main-nav a.active::after { width: 100%; }
        .main-nav a:focus-visible { outline: 1px dashed var(--color-primary); outline-offset: 4px; border-radius: 2px; }

        .header-controls { display: flex; align-items: center; gap: 0.5rem; } /* Wrapper for buttons */
        .theme-switcher { margin-left: 0; } /* Removed margin as now in flex container */
        .theme-toggle-button { background: none; border: none; cursor: pointer; padding: 5px; display: flex; align-items: center; justify-content: center; color: var(--color-text); border-radius: 50%; }
        .theme-toggle-button svg { width: 24px; height: 24px; fill: currentColor; transition: transform var(--transition-speed) ease-in-out; }
        .theme-toggle-button:hover svg { transform: rotate(15deg) scale(1.1); }
        .theme-toggle-button:focus-visible { outline: 2px solid var(--color-secondary); outline-offset: 2px; }
        body[data-theme="light"] .moon-icon { display: none; }
        body[data-theme="dark"] .sun-icon { display: none; }

        /* 4. Main Content Sections & Animations */
        main > section { padding: calc(var(--spacing-unit) * 2) 0; border-bottom: 1px solid var(--color-border); display: none; }
        main > section.active { display: block; opacity: 0; animation: routerFadeIn 0.5s ease-out forwards; }
        main > section:last-child { border-bottom: none; }
        @keyframes routerFadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Intersection Observer */
        .animate-on-scroll { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .animate-on-scroll.is-visible { opacity: 1; transform: translateY(0); }
        /* Base styles */
        main > section > h2, main > section > h3, main > section > p, main > section > ul, main > section > form, main > section > details,
        main > section > div:not(.projects-grid):not(.api-data):not(#canvas-container):not(.drop-zone):not(.output-box):not(.feature-grid):not(.editable-area-container),
        .project-card-wrapper, .feature-block { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .project-card-wrapper { display: block; }
        /* Visible state */
        main > section.is-visible > h2, main > section.is-visible > h3, main > section.is-visible > p, main > section.is-visible > ul, main > section.is-visible > form, main > section.is-visible > details,
        main > section.is-visible > div:not(.projects-grid):not(.api-data):not(#canvas-container):not(.drop-zone):not(.output-box):not(.feature-grid):not(.editable-area-container),
        .project-card-wrapper.is-visible, .feature-block.is-visible { opacity: 1; transform: translateY(0); }
        /* Stagger */
        .projects-grid .project-card-wrapper { transition-delay: calc(var(--card-index) * var(--animation-stagger-delay)); }
        .feature-block { transition-delay: calc(var(--feature-index) * var(--animation-stagger-delay)); }


        h1, h2, h3, h4 { color: var(--color-dark); margin-bottom: var(--spacing-unit); line-height: 1.3; transition: color var(--transition-speed) var(--transition-ease); }
        h1 { font-size: var(--h1-font-size); } h2 { font-size: var(--h2-font-size); } h3 { font-size: var(--h3-font-size); } h4 { font-size: var(--h4-font-size); }
        p { margin-bottom: var(--spacing-unit); }
        a { color: var(--color-link); text-decoration: none; transition: color var(--transition-speed) var(--transition-ease); }
        a:hover { color: var(--color-link-hover); text-decoration: underline; }
        a:focus-visible { outline: 1px dashed var(--color-link); outline-offset: 2px; border-radius: 2px; }

        /* Target pseudo-class styling */
        main > section:target {
            box-shadow: 0 0 0 2px var(--color-primary); /* Example highlight */
            border-radius: 5px; /* Optional */
        }

        /* Specific Section Styles */
        #home h1 { animation: textPopIn 1s ease-out 0.3s forwards; opacity: 0; }
        @keyframes textPopIn { 0% { opacity: 0; transform: scale(0.8) translateY(30px); } 80% { opacity: 1; transform: scale(1.05) translateY(-5px); } 100% { opacity: 1; transform: scale(1) translateY(0); } }

        /* Projects Section */
        #projects-filter { display: block; width: 100%; max-width: 400px; padding: 0.5rem; margin-bottom: var(--spacing-unit); border: 1px solid var(--color-border); border-radius: 4px; transition: border-color 0.2s ease, box-shadow 0.2s ease; }
        #projects-filter:focus { border-color: var(--color-primary); box-shadow: 0 0 0 2px rgba(var(--rgb-primary), 0.2); outline: none; }
        .projects-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: calc(var(--spacing-unit) * 1.5); margin-top: calc(var(--spacing-unit) * 1.5); }
        project-card { transition: opacity 0.3s ease, filter 0.3s ease; } /* Apply transition here */
        project-card .card { display: flex; flex-direction: column; height: 100%; }
        project-card h3 { margin-bottom: 0.5rem; font-size: 1.2rem; }
        project-card p { flex-grow: 1; margin-bottom: 1rem; font-size: 0.95rem; color: var(--color-secondary); }
        project-card .repo-meta { font-size: 0.85rem; color: var(--color-secondary); margin-bottom: 1rem; }
        project-card a.button { margin-top: auto; }
        .project-card-wrapper.match project-card { outline: 2px solid var(--color-accent); outline-offset: -2px; } /* Style wrapper or card */
        .project-card-wrapper.no-match { opacity: 0.4; filter: grayscale(60%); pointer-events: none; } /* Style wrapper */

        /* API Demo (Original JSON Placeholder) */
        #api-demo .api-data { position: relative; background-color: var(--color-light); border: 1px dashed var(--color-border); padding: var(--spacing-unit); margin-top: var(--spacing-unit); border-radius: 4px; font-family: var(--font-family-monospace); font-size: 0.9rem; word-break: break-all; transition: all var(--transition-speed) var(--transition-ease); max-height: 400px; overflow-y: auto; }
        #api-demo .copy-button { position: absolute; top: 8px; right: 8px; opacity: 0.6; transition: opacity 0.2s ease; background-color: rgba(var(--rgb-secondary), 0.7); border: none; } /* Adjusted style */
        #api-demo .copy-button:hover { opacity: 1; background-color: var(--color-secondary); }

        /* Canvas Demo */
        #canvas-container { position: relative; width: 100%; max-width: 600px; height: 300px; margin: var(--spacing-unit) auto; border: 1px solid var(--color-border); background: linear-gradient(45deg, rgba(var(--rgb-primary), 0.05), rgba(var(--rgb-info), 0.05)); overflow: hidden; border-radius: 4px; transition: border-color var(--transition-speed) var(--transition-ease); cursor: crosshair; }
        #demoCanvas { display: block; width: 100%; height: 100%; }

        /* Contact Form */
        .contact-form label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
        .contact-form input[type="text"], .contact-form input[type="email"], .contact-form textarea { display: block; width: 100%; padding: 0.75rem; font-size: var(--font-size-base); line-height: var(--line-height-base); color: var(--color-text); background-color: var(--color-background); background-clip: padding-box; border: 1px solid var(--color-border); border-radius: 0.25rem; margin-bottom: var(--spacing-unit); transition: all var(--transition-speed) var(--transition-ease); }
        .contact-form input:focus-visible, .contact-form textarea:focus-visible { border-color: var(--color-primary); outline: 0; box-shadow: 0 0 0 0.2rem rgba(var(--rgb-primary), 0.25); }
        .contact-form textarea { min-height: 120px; resize: vertical; }
        .contact-form .form-status { margin-top: var(--spacing-unit); font-style: italic; color: var(--color-success); font-weight: 500; }
        .contact-form .form-status.error { color: var(--color-danger); }

         /* Browser APIs Section Styling (#apis) */
         #apis .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: calc(var(--spacing-unit) * 1.5); }
         .feature-block { margin-bottom: 0; background-color: rgba(var(--rgb-primary), 0.03); padding: var(--spacing-unit); border-radius: 4px; border: 1px solid transparent; transition: all 0.3s ease; }
         .feature-block:hover { border-color: rgba(var(--rgb-primary), 0.2); background-color: rgba(var(--rgb-primary), 0.05); }
         .feature-block h3 { font-size: var(--h4-font-size); margin-bottom: 0.5rem; color: var(--color-accent); display: flex; align-items: center; }
         .feature-block h3 svg { margin-right: 8px; width: 20px; height: 20px; flex-shrink: 0; }
         .sensor-data dl { display: grid; grid-template-columns: auto 1fr; gap: 0.2rem 1rem; margin-top: 0.5rem;}
         .sensor-data dt { font-weight: bold; color: var(--color-secondary); grid-column: 1; font-size: 0.85em; }
         .sensor-data dd { font-family: var(--font-family-monospace); grid-column: 2; font-size: 0.85em;}
         .api-status-icon { width: 1em; height: 1em; margin-left: 0.5em; vertical-align: middle; } /* For Battery/Network */
         meter { width: 100%; height: 10px; margin-top: 5px; } /* Style for battery meter */
         progress { width: 100%; height: 8px; margin-top: 5px; } /* Style for progress */

        #drop-zone { border: 3px dashed var(--color-border); border-radius: 8px; padding: calc(var(--spacing-unit) * 2); text-align: center; color: var(--color-secondary); transition: all var(--transition-speed) var(--transition-ease); margin-top: var(--spacing-unit); background-color: rgba(var(--rgb-primary), 0.02); }
        #drop-zone.dragover { border-color: var(--color-primary); background-color: rgba(var(--rgb-primary), 0.1); color: var(--color-primary); transform: scale(1.02); }
        #file-info { margin-top: var(--spacing-unit); font-size: 0.9rem; }

         /* Clip Path Example (Same as before) */
        .clip-example { background: linear-gradient(135deg, var(--color-info), var(--color-success)); padding: 2rem; margin: 1rem auto; width: 80%; max-width: 400px; color: white; text-align: center; border-radius: 5px; clip-path: polygon(0% 0%, 100% 0%, 100% 85%, 50% 100%, 0% 85%); transition: clip-path 0.4s ease-in-out, transform 0.3s ease-out; }
        .clip-example:hover { clip-path: polygon(0% 15%, 50% 0%, 100% 15%, 100% 100%, 0% 100%); transform: scale(1.03); }

        /* Houdini Example - Animated Gradient Border */
        .houdini-example { margin-top: 1.5rem; padding: 1rem; border-radius: 4px; border: 3px solid; border-image-slice: 1; border-image-source: conic-gradient(from var(--gradient-angle, 0deg), var(--color-primary), var(--color-accent), var(--color-success), var(--color-primary)); animation: rotateGradient 5s linear infinite; text-align: center; color: var(--color-secondary); font-style: italic; }
        @keyframes rotateGradient { to { --gradient-angle: 360deg; } }

         /* Details/Summary Element Styling */
         details { border: 1px solid var(--color-border); border-radius: 4px; margin-bottom: var(--spacing-unit); background-color: var(--color-background); transition: background-color var(--transition-speed) ease; }
         summary { font-weight: 500; padding: 0.75rem var(--spacing-unit); cursor: pointer; background-color: rgba(var(--rgb-primary), 0.03); transition: background-color 0.2s ease; position: relative; list-style: none; }
         summary:hover { background-color: rgba(var(--rgb-primary), 0.08); }
         summary::-webkit-details-marker { display: none; }
         summary::before { content: '►'; position: absolute; left: calc(var(--spacing-unit) * 0.5); top: 50%; transform: translateY(-50%) rotate(0deg); transition: transform 0.2s ease-in-out; font-size: 0.8em; color: var(--color-secondary); }
         details[open] > summary { border-bottom: 1px solid var(--color-border); background-color: rgba(var(--rgb-primary), 0.05); }
         details[open] > summary::before { transform: translateY(-50%) rotate(90deg); }
         details > div { padding: var(--spacing-unit); padding-left: calc(var(--spacing-unit) * 2); }

         /* Content Editable Demo */
         .editable-area { border: 1px solid var(--color-border); min-height: 100px; padding: var(--spacing-unit); margin-top: 0.5rem; border-radius: 4px; background-color: var(--color-light); transition: all 0.2s ease; }
         .editable-area:focus { border-color: var(--color-primary); box-shadow: 0 0 0 2px rgba(var(--rgb-primary), 0.2); outline: none; background-color: var(--color-background); }

        /* 5. Footer */
        .app-footer { background-color: var(--color-dark); color: var(--color-light); padding: calc(var(--spacing-unit) * 1.5) 0; margin-top: calc(var(--spacing-unit) * 2); text-align: center; font-size: 0.9rem; transition: background-color var(--transition-speed) var(--transition-ease), color var(--transition-speed) var(--transition-ease); }
        .app-footer a { color: var(--color-warning); }
        .app-footer a:hover { color: var(--color-light); }

        /* 6. Dark Mode Theme */
        body[data-theme="dark"] { /* ... other dark vars ... */ --color-primary: #3391ff; --color-secondary: #8a939b; --color-light: #2c3034; --color-dark: #e9ecef; --color-text: #f8f9fa; --color-background: #1a1a1a; --color-border: #444; --color-link: var(--color-primary); --color-link-hover: #66afff; --color-shadow: rgba(255, 255, 255, 0.08); --color-scrollbar-thumb: #555; --color-scrollbar-thumb-hover: #777; --color-scrollbar-track: #2a2a2a; --color-accent: #ff8c33; --color-accent-hover: #f57c20;}
        body[data-theme="dark"] h1, body[data-theme="dark"] h2, body[data-theme="dark"] h3, body[data-theme="dark"] h4 { color: var(--color-dark); }
        body[data-theme="dark"] .card { background-color: #252525; }
        body[data-theme="dark"] .app-footer { background-color: #000; }
        body[data-theme="dark"] .contact-form input, body[data-theme="dark"] .contact-form textarea { background-color: #333; color: var(--color-text); border-color: #555; }
        body[data-theme="dark"] .contact-form input:focus-visible, body[data-theme="dark"] .contact-form textarea:focus-visible { border-color: var(--color-primary); box-shadow: 0 0 0 0.2rem rgba(var(--rgb-primary), 0.35); background-color: #383838; }
        body[data-theme="dark"] .output-box, body[data-theme="dark"] .editable-area { background-color: #2a2a2a; border-color: #555; }
        body[data-theme="dark"] #drop-zone { background-color: rgba(var(--rgb-primary), 0.03); border-color: #555;}
        body[data-theme="dark"] #drop-zone.dragover { background-color: rgba(var(--rgb-primary), 0.15); border-color: var(--color-primary); }
         body[data-theme="dark"] details { border-color: #555; background-color: #252525; }
         body[data-theme="dark"] summary { background-color: rgba(var(--rgb-primary), 0.1); }
         body[data-theme="dark"] summary:hover { background-color: rgba(var(--rgb-primary), 0.2); }
        /* Re-declare RGB vars for dark mode */
        :root { --rgb-primary: 0, 123, 255; --rgb-info: 23, 162, 184; --rgb-accent: 253, 126, 20;}
        body[data-theme="dark"] { --rgb-primary: 51, 145, 255; --rgb-info: 23, 162, 184; --rgb-accent: 255, 140, 51;}

        /* 7. Animations & Transitions */
        @keyframes pulse { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(var(--rgb-primary), 0.7); } 70% { transform: scale(1.05); box-shadow: 0 0 10px 15px rgba(var(--rgb-primary), 0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(var(--rgb-primary), 0); } }
        .pulse-button { animation: pulse 1.5s infinite; }

        /* Reduced Motion Preference */
        @media (prefers-reduced-motion: reduce) {
            html { scroll-behavior: auto; }
            *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
            #home h1 { animation: none; } .pulse-button { animation: none; }
            .animate-on-scroll, main > section > h2, main > section > h3, main > section > p, main > section > ul, main > section > form, main > section > details, main > section > div:not(.projects-grid):not(.api-data):not(#canvas-container):not(.drop-zone):not(.output-box):not(.feature-grid):not(.editable-area-container), .project-card-wrapper, .feature-block { opacity: 1 !important; transform: none !important; transition: none !important; animation: none !important; }
            main > section.active { animation: none; opacity: 1; transform: none; }
            #demoCanvas { display: none; }
            #canvas-container::after { content: "Canvas animation disabled due to reduced motion preference."; display: flex; align-items: center; justify-content: center; height: 100%; color: var(--color-secondary); font-style: italic; }
            .clip-example:hover { clip-path: polygon(0% 0%, 100% 0%, 100% 85%, 50% 100%, 0% 85%); transform: none; }
            .houdini-example { animation: none; border-image-source: conic-gradient(from 0deg, var(--color-primary), var(--color-accent), var(--color-success), var(--color-primary)); }
            .logo .icon .logo-path { animation: none; stroke-dashoffset: 0; }
        }

        /* 8. Responsive Design */
        @media (max-width: 992px) { /* Heading sizes adjusted via clamp() */ }
        @media (max-width: 768px) {
            .header-content { flex-direction: column; align-items: flex-start; }
            .main-nav ul { margin-top: var(--spacing-unit); gap: var(--spacing-unit); justify-content: center; width: 100%; }
            .header-controls { width: 100%; justify-content: flex-end; margin-top: 0.5rem; } /* Adjust header controls layout */
            .theme-switcher { /* No longer needs absolute positioning */ }
            .projects-grid { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
             #apis .feature-grid { grid-template-columns: 1fr; }
        }
        @media (max-width: 576px) {
            body { font-size: 0.95rem; }
            main { padding: var(--spacing-unit); }
            .container { padding-left: 0.5rem; padding-right: 0.5rem; }
            .button { padding: 0.4rem 0.8rem; font-size: 0.9rem; }
            .main-nav ul { gap: 0.8rem; font-size: 0.95rem; }
             .sensor-data dl { grid-template-columns: 1fr; }
        }

    </style>
    <!-- ** CSS END ** -->
</head>
<body data-theme="light"> <!-- Default theme -->

    <!-- HTML Template for Project Cards -->
    <template id="project-card-template">
        <div class="card">
            <h3><!-- Repo Name --></h3>
            <p><!-- Description --></p>
            <p class="repo-meta">Last updated: <time datetime=""><!-- Date --></time></p>
            <a href="#" target="_blank" rel="noopener noreferrer" class="button button-secondary small">View on GitHub</a>
        </div>
    </template>

    <div id="app-container">

        <header class="app-header">
            <div class="container header-content">
                <a href="#home" class="logo">
                     <svg class="icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                       <path class="logo-path" d="M50,5 L95,27 L95,73 L50,95 L5,73 L5,27 Z M15,32 L50,48 L85,32 M50,48 L50,85"/>
                     </svg>
                    Ultimate Static
                </a>
                <nav class="main-nav" aria-label="Main Navigation">
                     <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#projects">Projects</a></li>
                        <li><a href="#api-demo">API Demo</a></li>
                        <li><a href="#apis">Browser APIs</a></li>
                         <li><a href="#other-features">Other Features</a></li> {/* New Section Link */}
                        <li><a href="#canvas-demo">Canvas</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </nav>
                 <div class="header-controls"> {/* Wrapper for buttons */}
                    <button id="fullscreen-button" class="theme-toggle-button" title="Toggle Fullscreen" aria-label="Toggle Fullscreen">
                         {/* Fullscreen Icon */}
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v5.5c0 .414.336.75.75.75h2a.75.75 0 010 1.5h-2A2.25 2.25 0 013 11.75v-5.5zm11.75-.75a.75.75 0 01.75.75v5.5a2.25 2.25 0 01-2.25 2.25h-5.5A2.25 2.25 0 017 11.75v-2a.75.75 0 011.5 0v2c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-5.5a.75.75 0 01.75-.75z" clip-rule="evenodd" /></svg>
                    </button>
                    <div class="theme-switcher">
                         <button class="theme-toggle-button" id="theme-toggle" title="Toggle theme" aria-label="Toggle light/dark theme">
                            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.166 7.758a.75.75 0 001.06 1.06l1.591-1.59a.75.75 0 00-1.06-1.061L6.166 7.758z"/></svg>
                            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-3.51 1.713-6.63 4.362-8.472a.75.75 0 01.819.162z" clip-rule="evenodd"/></svg>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <main id="main-content">
            <section id="home" data-route="home" class="active animate-on-scroll">
                <h1>Welcome to the Ultimate Static Showcase!</h1>
                <p class="animate-on-scroll">Even more static features: Battery, Network, Clipboard, Fullscreen, SVG Animation, Details/Template Elements, Online/Offline Status, Session Storage, Content Editable, Web Crypto, Performance API...</p>
                 <div class="clip-example animate-on-scroll">
                     Check out this clipped element!
                 </div>
                 <div class="houdini-example animate-on-scroll">
                      CSS @property (Houdini) Example - Animating Gradient Border Angle
                 </div>
                <div class="animate-on-scroll">
                     <button class="button pulse-button" id="pulse-demo-button">Pulse Button</button>
                </div>
                 <div class="animate-on-scroll" style="margin-top: 1rem; font-size: 0.9em; color: var(--color-secondary);">
                    <span>Browser Status:</span>
                    <span id="online-status">Checking...</span>
                    <span id="online-status-indicator" class="status-indicator"></span>
                 </div>
            </section>

            <section id="about" data-route="about" class="animate-on-scroll">
                <h2>About This Demo</h2>
                <div style="display: flex; align-items: flex-start; gap: 1rem;" class="animate-on-scroll">
                    <p style="flex-grow: 1;" id="about-text-content">
                        This single HTML file demonstrates an extensive array of client-side technologies, truly pushing the limits of static web pages. All features run directly in your browser without needing a backend server.
                    </p>
                    <button class="button button-accent small" id="speak-about-button" title="Read text aloud" style="flex-shrink: 0;" aria-controls="about-text-content">
                         {/* Speak Icon */}
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="16" height="16"><path d="M10 3a.75.75 0 01.75.75v1.5h1.5a.75.75 0 010 1.5h-1.5v1.5a.75.75 0 01-1.5 0v-1.5h-1.5a.75.75 0 010-1.5h1.5v-1.5A.75.75 0 0110 3zM8.855 12.378a.75.75 0 01.463-.814 6.03 6.03 0 013.721 0 .75.75 0 01.464.814l-.427 1.28a.75.75 0 01-.648.572h-2.5a.75.75 0 01-.647-.572l-.426-1.28z" /> <path fill-rule="evenodd" d="M7.12 3.03a.75.75 0 011.06 0L19.97 14.8a.75.75 0 01-1.06 1.06L7.12 4.09a.75.75 0 010-1.06zm-3.75 4.5a.75.75 0 011.06 0L16.97 19.8a.75.75 0 01-1.06 1.06L3.37 8.59a.75.75 0 010-1.06z" clip-rule="evenodd" /> </svg>
                         Speak
                    </button>
                </div>
                <details class="animate-on-scroll">
                    <summary>Click to see the full feature list</summary>
                    <div>
                        <ul id="feature-list">
                            {/* Features will be listed here by JS */}
                        </ul>
                    </div>
                </details>
            </section>

            <section id="projects" data-route="projects" class="animate-on-scroll">
                <h2>Projects Showcase (Filterable & Cached)</h2>
                <p class="animate-on-scroll">GitHub repos cached in IndexedDB. Use the filter below.</p>
                 <div class="animate-on-scroll" style="margin-bottom: var(--spacing-unit); display: flex; flex-wrap: wrap; gap: 1rem; align-items: center;">
                     <div>
                        <label for="github-username" class="visually-hidden">GitHub Username:</label>
                        <input type="text" id="github-username" placeholder="GitHub Username" style="max-width: 200px; display: inline-block; margin: 0;">
                     </div>
                     <button class="button button-secondary" id="fetch-repos-button">Fetch Repos</button>
                     <button class="button button-danger small" id="clear-cache-button" title="Clear repo cache">Clear Cache</button>
                     <label style="margin-left: auto; font-size: 0.9em;"><input type="checkbox" id="remember-username"> Remember Username (Session)</label>
                 </div>
                  <div class="animate-on-scroll" style="margin-bottom: var(--spacing-unit);">
                     <label for="projects-filter" class="visually-hidden">Filter Repos:</label>
                     <input type="search" id="projects-filter" placeholder="Filter by name or description..." style="width: 100%; padding: 0.4rem 0.8rem; border: 1px solid var(--color-border); border-radius: 4px;">
                 </div>
                 <div id="fetch-performance" class="output-box animate-on-scroll" style="font-size: 0.85em; padding: 0.5rem; margin-bottom: 1rem; display: none;">
                    API Fetch Time: <span id="fetch-time"></span> ms
                 </div>
                <div class="projects-grid" id="projects-grid-container">
                    <div class="loading-indicator">Enter a GitHub username and click "Fetch Repos".</div>
                    {/* <project-card> wrappers will be inserted here */}
                </div>
            </section>

            {/* RESTORED Original API Demo Section */}
            <section id="api-demo" data-route="api-demo" class="animate-on-scroll">
                <h2>Public API Demo (JSON Placeholder)</h2>
                <p class="animate-on-scroll">Fetching data from a simple public API.</p>
                <div class="animate-on-scroll" style="margin-bottom: 0.5rem;">
                    <button class="button" id="fetch-api-button">Fetch Random User Data</button>
                </div>
                <div class="output-box animate-on-scroll" id="api-data-container" style="position: relative;">
                    Click the button to fetch data...
                    <button class="button small copy-button" id="copy-api-data-button" title="Copy JSON to clipboard" style="position: absolute; top: 8px; right: 8px; opacity: 0.6; transition: opacity 0.2s ease;">
                         {/* Copy Icon */}
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="14" height="14"><path d="M7 3.5A1.5 1.5 0 018.5 2h3.879a1.5 1.5 0 011.06.44l3.122 3.12A1.5 1.5 0 0117 6.622V12.5a1.5 1.5 0 01-1.5 1.5h-1a.75.75 0 010-1.5h1a.75.75 0 00.75-.75V7.379a.75.75 0 00-.22-.53L13.65 3.72a.75.75 0 00-.53-.22H8.5a.75.75 0 00-.75.75v1.5H6.5a.75.75 0 000 1.5h.75v4.75a.75.75 0 00.75.75h3.5a.75.75 0 000-1.5h-3.5a.75.75 0 01-.75-.75V7Z" /><path d="M3 9.5a1.5 1.5 0 011.5-1.5h4.5A1.5 1.5 0 0110.5 9.5v7A1.5 1.5 0 019 18H4.5A1.5 1.5 0 013 16.5v-7z" /></svg>
                    </button>
                </div>
            </section>

             {/* Browser APIs Section */}
            <section id="apis" data-route="apis" class="animate-on-scroll">
                 <h2>Browser API Demos</h2>
                 <p class="animate-on-scroll">Interacting with various browser capabilities.</p>
                 <div class="feature-grid">
                    {/* Geolocation, Device Motion, Worker, D&D, Battery, Network */}
                    {/* (HTML Structure remains the same as previous 'Hyper' version) */}
                     <div class="feature-block animate-on-scroll" style="--feature-index: 1;">
                        <h3><svg ... > Geolocation</h3>
                        <button class="button button-accent small" id="geo-button">Get Location</button>
                        <div id="geo-output" class="output-box">Requires permission...</div>
                    </div>
                     <div class="feature-block animate-on-scroll" style="--feature-index: 2;">
                        <h3><svg ... > Device Motion</h3>
                        <button class="button button-accent small" id="motion-button">Start Tracking Motion</button>
                        <div id="motion-output" class="output-box sensor-data">Requires mobile & permission...</div>
                    </div>
                     <div class="feature-block animate-on-scroll" style="--feature-index: 3;">
                        <h3><svg ... > Web Worker</h3>
                        <button class="button button-accent small" id="worker-button">Run Background Task</button>
                        <div id="worker-output" class="output-box">Worker result appears here... <progress id="worker-progress" max="100" value="0" style="width:100%; display: none;"></progress></div>
                    </div>
                     <div class="feature-block animate-on-scroll" style="--feature-index: 4;">
                        <h3><svg ... > Drag & Drop</h3>
                         <div id="drop-zone"> <p>Drag a file here</p> </div>
                        <div id="file-info" class="output-box">File info appears here...</div>
                    </div>
                     <div class="feature-block animate-on-scroll" style="--feature-index: 5;">
                        <h3><svg ... > Battery Status</h3>
                        <div id="battery-output" class="output-box">Loading... <meter id="battery-level-meter" min="0" max="100" low="20" high="80" optimum="90" value="0" style="width: 100%; height: 15px; vertical-align: middle; display: none;"></meter></div>
                    </div>
                     <div class="feature-block animate-on-scroll" style="--feature-index: 6;">
                        <h3><svg ... > Network Info</h3>
                        <div id="network-output" class="output-box">Loading...</div>
                    </div>
                 </div>
            </section>

             {/* NEW Section for Other Features */}
            <section id="other-features" data-route="other-features" class="animate-on-scroll">
                 <h2>Other Static Features</h2>
                 <p class="animate-on-scroll">More demonstrations of client-side capabilities.</p>
                 <div class="feature-grid">

                    {/* Content Editable */}
                     <div class="feature-block animate-on-scroll" style="--feature-index: 1;">
                        <h3><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" /></svg>Content Editable</h3>
                        <p>Click the area below to edit the text directly in the browser.</p>
                        <div class="editable-area-container">
                            <div id="editable-content" class="editable-area" contenteditable="true">
                                This text is editable. Try selecting text and clicking <b>Bold</b>.
                            </div>
                            <button id="bold-button" class="button small button-secondary" style="margin-top: 0.5rem;">Bold</button>
                        </div>
                    </div>

                     {/* Web Crypto */}
                    <div class="feature-block animate-on-scroll" style="--feature-index: 2;">
                        <h3><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" /></svg>Web Crypto API (SHA-256)</h3>
                        <label for="crypto-input" class="visually-hidden">Text to hash:</label>
                        <input type="text" id="crypto-input" placeholder="Enter text to hash" style="width:100%; margin-bottom: 0.5rem;">
                        <button id="hash-button" class="button button-accent small">Generate Hash</button>
                        <div id="crypto-output" class="output-box" style="margin-top: 0.5rem; font-size: 0.8em;">Hash appears here...</div>
                    </div>

                 </div>
            </section>

            {/* Canvas and Contact sections remain the same */}
            <section id="canvas-demo" data-route="canvas-demo" class="animate-on-scroll"> /* ... Canvas HTML ... */ </section>
            <section id="contact" data-route="contact" class="animate-on-scroll"> /* ... Contact Form HTML ... */ </section>
        </main>

        <footer class="app-footer">
            <div class="container">
                <p>© <span id="current-year"></span> Ultimate Static Showcase. Exploring the Edge.</p>
                 <p>Features: Routing, Theming, APIs, IndexedDB, Web Components, Workers, Geo, Motion, Speech, Clipboard, Fullscreen, Battery, Network, D&D, Vibration, Canvas, Animation, Responsive CSS, ContentEditable, Web Crypto, Performance API, Template/Details elements, and more!</p>
            </div>
        </footer>
    </div> <!-- End #app-container -->

    <!-- ** JAVASCRIPT START ** -->
    <script>
        // Wrap in IIFE
        (function() {
            'use strict';

            // --- CONFIGURATION ---
            // ... same config ...

            // --- DOM Elements ---
            // ... existing elements ...
            const onlineStatusElement = document.getElementById('online-status'); // New
            const onlineStatusIndicator = document.getElementById('online-status-indicator'); // New
            const featureListElement = document.getElementById('feature-list'); // New
            const rememberUsernameCheckbox = document.getElementById('remember-username'); // New
            const fetchPerformanceElement = document.getElementById('fetch-performance'); // New
            const fetchTimeElement = document.getElementById('fetch-time'); // New
            const editableContentElement = document.getElementById('editable-content'); // New
            const boldButton = document.getElementById('bold-button'); // New
            const cryptoInputElement = document.getElementById('crypto-input'); // New
            const hashButton = document.getElementById('hash-button'); // New
            const cryptoOutputElement = document.getElementById('crypto-output'); // New
            const batteryLevelMeter = document.getElementById('battery-level-meter'); // New
            const workerProgressElement = document.getElementById('worker-progress'); // New

             // --- UTILITIES ---
             // ... same debounce, formatBytes ...

            // --- IndexedDB (Same as before) ---
            // ... openDb, saveReposToDb, getReposFromDb, clearRepoCache ...

            // --- WEB COMPONENT: Project Card (Same as before) ---
            // ... ProjectCard class definition ...
            if (!customElements.get('project-card')) customElements.define('project-card', ProjectCard);

            // --- THEME HANDLING (Same as before) ---
            // ... applyTheme, toggleTheme, loadSavedTheme ...

            // --- ROUTING (Adapted for Page Visibility) ---
            function handleRouteChange() {
                 // ... same routing logic ...
                 if (targetSection) {
                     // ... existing logic ...
                     // Page Visibility check for canvas
                     if (route === 'canvas-demo') {
                         if (document.visibilityState === 'visible' && !animationFrameId && supportsCanvas()) { initCanvas(); }
                     } else {
                          if (animationFrameId) { cancelAnimationFrame(animationFrameId); animationFrameId = null; }
                     }
                      // ... other API start/stop logic ...
                      if (route !== 'apis' && motionListenerActive) { stopMotionTracking(); }
                      if (window.speechSynthesis && window.speechSynthesis.speaking) { window.speechSynthesis.cancel(); }
                 } else {
                     // ... fallback logic ...
                     if (animationFrameId) { cancelAnimationFrame(animationFrameId); animationFrameId = null; } // Stop canvas on fallback too
                 }
             }
            // ... updateNavActiveState ...

            // --- API Fetching & Display (Using HTML Template, Added Performance Timing) ---
            async function fetchGitHubRepos(username) {
                 const startTime = performance.now(); // Start timing
                 fetchPerformanceElement.style.display = 'none'; // Hide previous time
                 /* ... same fetch/cache logic ... */
                 try {
                      // ... inside try block after getting repos ...
                      await saveReposToDb(username, currentReposData); // Save fresh data
                      displayRepos(currentReposData, false);
                 } catch (error) { /* ... error handling ... */ }
                 finally {
                      const endTime = performance.now();
                      const duration = (endTime - startTime).toFixed(1);
                      fetchTimeElement.textContent = duration;
                      fetchPerformanceElement.style.display = 'block'; // Show time
                 }
             }
            function displayRepos(repos, fromCache = false) { /* ... same logic using template ... */ }
            function filterProjects() { /* ... same filtering logic with highlighting ... */ }
            async function fetchPlaceholderData() { /* ... same fetch logic for #api-demo ... */ }

            // --- FORM HANDLING (Added Vibration) ---
            function handleContactFormSubmit(event) { /* ... same logic, includes vibrateDevice(50); ... */ }

             // --- WEB ANIMATIONS API (Same) ---
             function animatePulseButton() { /* ... same ... */ }

             // --- CANVAS ANIMATION (Paused by Visibility API) ---
             function supportsCanvas() { /* ... same ... */ }
             function initCanvas() { /* ... same ... */ }
             const debouncedResizeCanvas = debounce(()=>{ /* ... same ... */ }, 250);
             function resizeCanvas() { /* ... same ... */ }
             function createParticles() { /* ... same ... */ }
             function handleCanvasMouseMove(event) { /* ... same ... */ }
             function animateParticles() {
                 if (!ctx || document.visibilityState === 'hidden') { // Check visibility
                      if (animationFrameId) {
                           cancelAnimationFrame(animationFrameId);
                           animationFrameId = null;
                           console.log('Canvas animation paused due to page visibility.');
                      }
                      return; // Don't run if hidden or context lost
                 }
                 /* ... rest of animation logic ... */
                 animationFrameId = requestAnimationFrame(animateParticles);
             }

             // --- GEOLOCATION API (Same) ---
             function handleGeoRequest() { /* ... same ... */ }

            // --- DEVICE MOTION API (Same) ---
             function handleDeviceMotion(event) { /* ... same ... */ }
             function startMotionTracking() { /* ... same ... */ }
             function stopMotionTracking() { /* ... same ... */ }
             function toggleMotionTracking() { /* ... same ... */ }

             // --- WEB SPEECH API (SYNTHESIS) (Same) ---
             function speakText(text) { /* ... same ... */ }

             // --- WEB WORKER (Added Progress Simulation) ---
             let myWorker = null;
             function startWorkerTask() {
                  if (!window.Worker) { /* ... error handling ... */ return; }
                  workerOutput.textContent = 'Starting...'; workerOutput.className = 'output-box info-indicator'; workerButton.disabled = true; workerProgressElement.style.display = 'block'; workerProgressElement.value = 0;
                  const workerCode = `
                       self.onmessage = function(e) {
                           const num = e.data; let result = 'Simulated task for ' + num; let count = 0;
                           const totalIterations = num * 10000;
                           for (let i = 0; i < totalIterations; i++) {
                                count++;
                                // Simulate progress update
                                if (i % (totalIterations / 100) === 0) { // Update progress roughly 100 times
                                     self.postMessage({ progress: (i / totalIterations) * 100 });
                                }
                           }
                           result = 'Work done ('+count+' iterations).';
                           self.postMessage({ result: result, progress: 100 }); // Final result and progress
                       }
                  `;
                  const blob = new Blob([workerCode], { type: 'application/javascript' }); const url = URL.createObjectURL(blob);
                  if(myWorker) myWorker.terminate(); myWorker = new Worker(url);
                  myWorker.onmessage = (e) => {
                       if (e.data.progress !== undefined) {
                            workerProgressElement.value = e.data.progress;
                       }
                       if (e.data.result) {
                            workerOutput.textContent = `Result: ${e.data.result}`; workerOutput.className = 'output-box'; workerButton.disabled = false; workerProgressElement.style.display = 'none';
                       } else if (e.data.error) {
                            workerOutput.textContent = `Error: ${e.data.error}`; workerOutput.className = 'output-box error-indicator'; workerButton.disabled = false; workerProgressElement.style.display = 'none';
                       }
                  };
                  myWorker.onerror = (e) => { /* ... error handling ... */ workerButton.disabled = false; workerProgressElement.style.display = 'none'; };
                  myWorker.postMessage(500);
              }

             // --- DRAG AND DROP (Same) ---
             function setupDragDrop() { /* ... same ... */ }
             function preventDefaults(e){ /* ... same ... */ }
             function handleDrop(e) { /* ... same logic using formatBytes ... */ }

             // --- BATTERY STATUS API (Using Meter) ---
             async function updateBatteryStatus() {
                  if (!('getBattery' in navigator)) { /* ... error handling ... */ batteryOutput.textContent = 'API not supported.'; return; }
                  try {
                       const battery = await navigator.getBattery();
                       const level = battery.level * 100;
                       const charging = battery.charging;
                       const icon = charging ? `<svg ... charging icon ... </svg>` : `<svg ... battery icon ... </svg>`; // Same icons

                       batteryLevelMeter.value = level;
                       batteryLevelMeter.style.display = 'block'; // Show meter
                       batteryOutput.innerHTML = `Level: ${level.toFixed(0)}% ${icon} | Charging: ${charging ? 'Yes' : 'No'}`;
                       batteryOutput.className = 'output-box';

                       battery.addEventListener('levelchange', () => { batteryLevelMeter.value = battery.level * 100; updateBatteryStatus(); }); // Re-run for text update
                       battery.addEventListener('chargingchange', updateBatteryStatus);
                  } catch (error) { /* ... error handling ... */ batteryOutput.textContent = 'Error accessing battery.'; }
              }

            // --- NETWORK INFORMATION API (Same) ---
             function updateNetworkStatus() { /* ... same ... */ }

             // --- CLIPBOARD API (Same) ---
             async function copyToClipboard(text, buttonElement) { /* ... same ... */ }

             // --- FULLSCREEN API (Same) ---
             function toggleFullScreen() { /* ... same ... */ }

              // --- VIBRATION API ---
              function vibrateDevice(duration) { /* ... same ... */ }

              // --- PAGE VISIBILITY API ---
              function handleVisibilityChange() {
                  if (document.visibilityState === 'hidden') {
                       // If canvas animation is running, pause it (animateParticles handles this now)
                       if (animationFrameId) {
                            console.log("Page hidden, animation should pause.");
                       }
                       // Could pause other things like videos, etc.
                  } else {
                       // If canvas should be running, restart it
                       if (window.location.hash === '#canvas-demo' && !animationFrameId && supportsCanvas()) {
                            animateParticles(); // Restart loop
                            console.log("Page visible, restarting canvas animation.");
                       }
                  }
              }

            // --- ONLINE/OFFLINE EVENTS ---
            function updateOnlineStatus() {
                const isOnline = navigator.onLine;
                onlineStatusElement.textContent = isOnline ? 'Online' : 'Offline';
                onlineStatusIndicator.className = `status-indicator ${isOnline ? 'online' : 'offline'}`;
                onlineStatusIndicator.title = isOnline ? 'Browser is online' : 'Browser is offline';
            }

            // --- SESSION STORAGE ---
            function loadSessionUsername() {
                const savedUser = sessionStorage.getItem('githubUsername');
                if (savedUser && githubUsernameInput) {
                    githubUsernameInput.value = savedUser;
                    rememberUsernameCheckbox.checked = true;
                }
            }
            function handleRememberUsername() {
                 if (rememberUsernameCheckbox.checked && githubUsernameInput.value.trim()) {
                      sessionStorage.setItem('githubUsername', githubUsernameInput.value.trim());
                 } else {
                      sessionStorage.removeItem('githubUsername');
                 }
            }

            // --- CONTENT EDITABLE ---
            function handleBoldClick() {
                 document.execCommand('bold', false, null);
                 // Note: execCommand is largely deprecated but works for simple cases.
                 // For complex editors, use libraries or modern input events/range manipulation.
                 if (editableContentElement) editableContentElement.focus(); // Keep focus
            }

             // --- WEB CRYPTO API ---
             async function generateHash() {
                 const inputText = cryptoInputElement.value;
                 if (!inputText) {
                     cryptoOutputElement.textContent = 'Please enter text to hash.';
                     cryptoOutputElement.className = 'output-box info-indicator';
                     return;
                 }
                 if (!window.crypto || !window.crypto.subtle) {
                     cryptoOutputElement.textContent = 'Web Crypto API not supported.';
                      cryptoOutputElement.className = 'output-box error-indicator';
                     return;
                 }

                 cryptoOutputElement.textContent = 'Generating SHA-256 hash...';
                 cryptoOutputElement.className = 'output-box info-indicator';

                 try {
                     const encoder = new TextEncoder();
                     const data = encoder.encode(inputText);
                     const hashBuffer = await crypto.subtle.digest('SHA-256', data);
                     const hashArray = Array.from(new Uint8Array(hashBuffer)); // Convert buffer to byte array
                     const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join(''); // Convert bytes to hex string
                     cryptoOutputElement.textContent = `SHA-256 Hash:\n${hashHex}`;
                     cryptoOutputElement.className = 'output-box';
                 } catch (error) {
                     console.error("Crypto API error:", error);
                     cryptoOutputElement.textContent = `Error generating hash: ${error.message}`;
                      cryptoOutputElement.className = 'output-box error-indicator';
                 }
             }


            // --- POPULATE FEATURE LIST (Example) ---
            function populateFeatureList() {
                 const features = [
                    "Client-Side Routing (#hash)", "Web Components (<project-card>)", "IndexedDB Caching",
                    "Intersection Observer", "Web Workers (Blob URL)", "Geolocation API", "Device Motion API",
                    "Web Speech API (Synth)", "Clipboard API", "Fullscreen API", "Battery Status API",
                    "Network Info API", "Drag & Drop API", "Vibration API", "Canvas API (Interactive)",
                    "API Fetching (GitHub, Placeholder)", "Client-Side Filtering", "Light/Dark Theming",
                    "Responsive Design", "Modern CSS Features", "SVG Animation (SMIL/CSS)",
                    "HTML <template>", "HTML <details>/<summary>", "Page Visibility API",
                    "Online/Offline Events", "Session Storage", "Content Editable", "Web Crypto API",
                    "Performance API", "HTML <meter>", "HTML <progress>"
                 ];
                 if (featureListElement) {
                      featureListElement.innerHTML = features.map(f => `<li>${f}</li>`).join('');
                 }
            }


            // --- INTERSECTION OBSERVER (Same logic) ---
            // ... initIntersectionObserver, observeElements ...

            // --- INITIALIZATION ---
            function init() {
                if(currentYearSpan) currentYearSpan.textContent = new Date().getFullYear();
                loadSavedTheme();
                openDb().catch(e => console.error("DB init error:", e));
                handleRouteChange();
                initIntersectionObserver();
                setupDragDrop();
                updateBatteryStatus();
                updateNetworkStatus();
                updateOnlineStatus(); // Initial online status check
                loadSessionUsername(); // Load username from session storage
                populateFeatureList(); // Populate feature list in About section

                // Event listeners
                window.addEventListener('hashchange', handleRouteChange);
                window.addEventListener('online', updateOnlineStatus); // Listen for online/offline changes
                window.addEventListener('offline', updateOnlineStatus);
                document.addEventListener('visibilitychange', handleVisibilityChange); // Listen for tab visibility

                if (themeToggleButton) themeToggleButton.addEventListener('click', toggleTheme);
                if (fetchReposButton && githubUsernameInput) { /* ... */ fetchReposButton.addEventListener('click', () => { const u = githubUsernameInput.value.trim(); if (u) fetchGitHubRepos(u); handleRememberUsername(); }); githubUsernameInput.addEventListener('keypress',(e)=>{if(e.key==='Enter')fetchReposButton.click();}); }
                 if (rememberUsernameCheckbox) rememberUsernameCheckbox.addEventListener('change', handleRememberUsername); // Save username pref
                if (clearCacheButton) clearCacheButton.addEventListener('click', clearRepoCache);
                if (projectsFilterInput) projectsFilterInput.addEventListener('input', debounce(filterProjects, 300));
                if (fetchApiButton) fetchApiButton.addEventListener('click', fetchPlaceholderData);
                if (copyApiDataButton && apiDataContainer) copyApiDataButton.addEventListener('click', () => copyToClipboard(apiDataContainer.textContent, copyApiDataButton));
                if (contactForm) contactForm.addEventListener('submit', handleContactFormSubmit);
                if (contactSubmitButton) contactSubmitButton.addEventListener('click', () => vibrateDevice(50)); // Vibrate on click
                if (pulseButton) pulseButton.addEventListener('click', animatePulseButton);
                window.addEventListener('resize', debouncedResizeCanvas);
                if (geoButton) geoButton.addEventListener('click', handleGeoRequest);
                if (motionButton) motionButton.addEventListener('click', toggleMotionTracking);
                if (speakAboutButton && aboutTextContent) speakAboutButton.addEventListener('click', () => speakText(aboutTextContent.textContent.trim()));
                if (workerButton) workerButton.addEventListener('click', startWorkerTask);
                 if (fullscreenButton) fullscreenButton.addEventListener('click', toggleFullScreen);
                 if (boldButton) boldButton.addEventListener('click', handleBoldClick); // Listener for content editable button
                 if (hashButton) hashButton.addEventListener('click', generateHash); // Listener for crypto button

                console.log("Ultimate Static Showcase Initialized!");
            }

            document.addEventListener('DOMContentLoaded', init);

        })();
    </script>
    <!-- ** JAVASCRIPT END ** -->

    <!-- PWA Manifest & SW Comments (Same as before) -->
    <!-- ... manifest.json content comment ... -->
    <!-- ... sw.js concept comment ... -->

</body>
</html>
