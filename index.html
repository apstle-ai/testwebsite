<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A complex single-page static website showcasing modern web technologies for GitHub Pages.">
    <meta name="author" content="AI Generated Demo">

    <title>Modern Static Showcase</title>

    <!-- Link to manifest (Create a manifest.json file with the content provided in comments below) -->
    <link rel="manifest" href="manifest.json">
    <!-- Optional: iOS specific meta tags for PWAs -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1a1a1a">

    <!-- ** CSS START ** -->
    <style>
        /* 1. Reset & Global Styles */
        :root {
            /* Color Palette (Light Mode Default) */
            --color-primary: #007bff;
            --color-secondary: #6c757d;
            --color-success: #28a745;
            --color-danger: #dc3545;
            --color-warning: #ffc107;
            --color-info: #17a2b8;
            --color-light: #f8f9fa;
            --color-dark: #343a40;
            --color-text: #212529;
            --color-background: #ffffff;
            --color-border: #dee2e6;
            --color-link: var(--color-primary);
            --color-link-hover: #0056b3;
            --color-shadow: rgba(0, 0, 0, 0.1);

            /* Typography */
            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            --font-size-base: 1rem; /* Typically 16px */
            --line-height-base: 1.6;

            /* Spacing */
            --spacing-unit: 1rem;

            /* Transitions */
            --transition-speed: 0.3s;
            --transition-ease: ease-in-out;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 100%; /* Base for rem units */
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-family-sans-serif);
            font-size: var(--font-size-base);
            line-height: var(--line-height-base);
            color: var(--color-text);
            background-color: var(--color-background);
            transition: background-color var(--transition-speed) var(--transition-ease), color var(--transition-speed) var(--transition-ease);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        /* Make header/footer not part of the scrollable main content area */
        #app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        main {
            flex-grow: 1; /* Ensure main takes up available space */
            width: 100%;
            max-width: 1200px; /* Max content width */
            margin: 0 auto;
            padding: calc(var(--spacing-unit) * 1.5);
        }

        /* 2. Utility Classes */
        .container {
            width: 100%;
            max-width: 1140px;
            margin-left: auto;
            margin-right: auto;
            padding-left: var(--spacing-unit);
            padding-right: var(--spacing-unit);
        }

        .text-center { text-align: center; }
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        .button {
            display: inline-block;
            font-weight: 400;
            color: var(--color-light);
            text-align: center;
            vertical-align: middle;
            cursor: pointer;
            user-select: none;
            background-color: var(--color-primary);
            border: 1px solid var(--color-primary);
            padding: 0.5rem 1rem;
            font-size: var(--font-size-base);
            line-height: var(--line-height-base);
            border-radius: 0.25rem;
            transition: color var(--transition-speed) var(--transition-ease), background-color var(--transition-speed) var(--transition-ease), border-color var(--transition-speed) var(--transition-ease), box-shadow var(--transition-speed) var(--transition-ease);
            text-decoration: none;
        }
        .button:hover {
            background-color: var(--color-link-hover);
            border-color: var(--color-link-hover);
            color: #fff;
        }
        .button-secondary {
            background-color: var(--color-secondary);
            border-color: var(--color-secondary);
        }
        .button-secondary:hover {
            background-color: #5a6268;
            border-color: #545b62;
        }
        .card {
            background-color: var(--color-background);
            border: 1px solid var(--color-border);
            border-radius: 0.3rem;
            box-shadow: 0 2px 5px var(--color-shadow);
            margin-bottom: var(--spacing-unit);
            padding: calc(var(--spacing-unit) * 1.25);
            transition: background-color var(--transition-speed) var(--transition-ease), border-color var(--transition-speed) var(--transition-ease);
        }

        /* 3. Header & Navigation */
        .app-header {
            background-color: var(--color-background);
            padding: var(--spacing-unit) 0;
            box-shadow: 0 2px 4px var(--color-shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: background-color var(--transition-speed) var(--transition-ease);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap; /* Allow wrapping on small screens */
        }

        .logo {
            font-size: 1.75rem;
            font-weight: bold;
            color: var(--color-primary);
            text-decoration: none;
            margin-right: var(--spacing-unit);
        }
        .logo .icon { /* Simple inline SVG logo */
            width: 30px;
            height: 30px;
            vertical-align: middle;
            margin-right: 5px;
            fill: currentColor;
        }


        .main-nav ul {
            list-style: none;
            display: flex;
            gap: calc(var(--spacing-unit) * 1.5);
            margin: 0; /* Reset margin */
            padding: 0; /* Reset padding */
            flex-wrap: wrap; /* Allow nav items to wrap */
        }

        .main-nav a {
            text-decoration: none;
            color: var(--color-text);
            font-weight: 500;
            padding: 0.5rem 0;
            position: relative;
            transition: color var(--transition-speed) var(--transition-ease);
        }

        .main-nav a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            background-color: var(--color-primary);
            transition: width var(--transition-speed) var(--transition-ease), left var(--transition-speed) var(--transition-ease);
        }

        .main-nav a:hover,
        .main-nav a.active {
            color: var(--color-primary);
        }

        .main-nav a:hover::after,
        .main-nav a.active::after {
            width: 100%;
            left: 0;
        }

        .theme-switcher {
            margin-left: var(--spacing-unit); /* Push to the right */
        }

        .theme-toggle-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-text);
        }
        .theme-toggle-button svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
            transition: transform var(--transition-speed) ease-in-out;
        }
        .theme-toggle-button:hover svg {
            transform: rotate(15deg) scale(1.1);
        }

        /* Hide one icon based on the current theme */
        body[data-theme="light"] .moon-icon { display: none; }
        body[data-theme="dark"] .sun-icon { display: none; }


        /* 4. Main Content Sections */
        main > section {
            padding: calc(var(--spacing-unit) * 2) 0;
            border-bottom: 1px solid var(--color-border);
            display: none; /* Hidden by default, shown by JS router */
            opacity: 0;
            animation: fadeIn 0.6s ease-out forwards;
        }
        main > section:last-child {
            border-bottom: none;
        }
        main > section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1, h2, h3 {
            color: var(--color-dark);
            margin-bottom: var(--spacing-unit);
            line-height: 1.3;
            transition: color var(--transition-speed) var(--transition-ease);
        }
        h1 { font-size: 2.5rem; }
        h2 { font-size: 2rem; }
        h3 { font-size: 1.5rem; }

        p { margin-bottom: var(--spacing-unit); }
        a { color: var(--color-link); text-decoration: none; transition: color var(--transition-speed) var(--transition-ease); }
        a:hover { color: var(--color-link-hover); text-decoration: underline; }

        /* Specific Section Styles */
        #home {
            text-align: center;
        }
        #home h1 {
            animation: textPopIn 1s ease-out forwards;
        }

        @keyframes textPopIn {
            0% { opacity: 0; transform: scale(0.8) translateY(30px); }
            80% { opacity: 1; transform: scale(1.05) translateY(-5px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }

        /* Projects Section */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: calc(var(--spacing-unit) * 1.5);
            margin-top: calc(var(--spacing-unit) * 1.5);
        }
        .project-card {
            display: flex;
            flex-direction: column;
        }
        .project-card h3 {
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        .project-card p {
            flex-grow: 1; /* Make description take available space */
            margin-bottom: 1rem;
            font-size: 0.95rem;
            color: var(--color-secondary);
        }
        .project-card a {
            margin-top: auto; /* Push link to bottom */
        }
        .loading-indicator {
            text-align: center;
            padding: 2rem;
            font-style: italic;
            color: var(--color-secondary);
        }

        /* API Demo Section */
        #api-demo .api-data {
            background-color: var(--color-light);
            border: 1px dashed var(--color-border);
            padding: var(--spacing-unit);
            margin-top: var(--spacing-unit);
            border-radius: 4px;
            font-family: var(--font-family-monospace);
            font-size: 0.9rem;
            word-break: break-all;
            transition: background-color var(--transition-speed) var(--transition-ease), border-color var(--transition-speed) var(--transition-ease);
        }

        /* Canvas Demo Section */
        #canvas-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Limit canvas size */
            height: 300px;
            margin: var(--spacing-unit) auto;
            border: 1px solid var(--color-border);
            background: linear-gradient(45deg, rgba(var(--rgb-primary), 0.1), rgba(var(--rgb-info), 0.1));
            overflow: hidden;
            border-radius: 4px;
            transition: border-color var(--transition-speed) var(--transition-ease);
        }
        #demoCanvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        /* Contact Form */
        .contact-form label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        .contact-form input[type="text"],
        .contact-form input[type="email"],
        .contact-form textarea {
            display: block;
            width: 100%;
            padding: 0.75rem;
            font-size: var(--font-size-base);
            line-height: var(--line-height-base);
            color: var(--color-text);
            background-color: var(--color-background);
            background-clip: padding-box;
            border: 1px solid var(--color-border);
            border-radius: 0.25rem;
            margin-bottom: var(--spacing-unit);
            transition: border-color var(--transition-speed) var(--transition-ease), box-shadow var(--transition-speed) var(--transition-ease), background-color var(--transition-speed) var(--transition-ease), color var(--transition-speed) var(--transition-ease);
        }
        .contact-form input[type="text"]:focus,
        .contact-form input[type="email"]:focus,
        .contact-form textarea:focus {
            border-color: var(--color-primary);
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba(var(--rgb-primary), 0.25);
        }
        .contact-form textarea {
            min-height: 120px;
            resize: vertical;
        }
        .contact-form .form-status {
            margin-top: var(--spacing-unit);
            font-style: italic;
            color: var(--color-secondary);
        }

        /* 5. Footer */
        .app-footer {
            background-color: var(--color-dark);
            color: var(--color-light);
            padding: calc(var(--spacing-unit) * 1.5) 0;
            margin-top: calc(var(--spacing-unit) * 2); /* Push footer down */
            text-align: center;
            font-size: 0.9rem;
            transition: background-color var(--transition-speed) var(--transition-ease), color var(--transition-speed) var(--transition-ease);
        }
        .app-footer a {
            color: var(--color-warning); /* Stand out link color in footer */
        }
        .app-footer a:hover {
            color: var(--color-light);
        }

        /* 6. Dark Mode Theme */
        body[data-theme="dark"] {
            --color-primary: #3391ff;
            --color-secondary: #8a939b;
            --color-light: #2c3034; /* Darker light */
            --color-dark: #e9ecef;  /* Lighter dark */
            --color-text: #f8f9fa;
            --color-background: #1a1a1a;
            --color-border: #444;
            --color-link: var(--color-primary);
            --color-link-hover: #66afff;
            --color-shadow: rgba(255, 255, 255, 0.08);
        }
        body[data-theme="dark"] h1,
        body[data-theme="dark"] h2,
        body[data-theme="dark"] h3 {
            color: var(--color-dark); /* Use the lighter dark color for headings */
        }
        body[data-theme="dark"] .card {
             background-color: #252525; /* Slightly lighter than body background */
        }
        body[data-theme="dark"] .app-footer {
            background-color: #000; /* Even darker footer */
        }
        body[data-theme="dark"] .contact-form input,
        body[data-theme="dark"] .contact-form textarea {
             background-color: #333;
             color: var(--color-text);
             border-color: #555;
        }
        body[data-theme="dark"] .contact-form input:focus,
        body[data-theme="dark"] .contact-form textarea:focus {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 0.2rem rgba(var(--rgb-primary), 0.35);
            background-color: #383838;
        }
        body[data-theme="dark"] #api-demo .api-data {
            background-color: #2a2a2a;
            border-color: #555;
        }
        /* Convert HEX to RGB for RGBA usage */
        /* This needs to be done manually or with JS for dynamic themes */
        :root { --rgb-primary: 0, 123, 255; --rgb-info: 23, 162, 184; }
        body[data-theme="dark"] { --rgb-primary: 51, 145, 255; --rgb-info: 23, 162, 184; /* Info might stay same or adjust */ }


        /* 7. Animations & Transitions */
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(var(--rgb-primary), 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 10px 15px rgba(var(--rgb-primary), 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(var(--rgb-primary), 0); }
        }

        .pulse-button {
            animation: pulse 1.5s infinite;
        }

        /* Reduced Motion Preference */
        @media (prefers-reduced-motion: reduce) {
            html {
                scroll-behavior: auto; /* Disable smooth scrolling */
            }
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
            /* Specifically turn off animations we added */
            #home h1 { animation: none; }
            .pulse-button { animation: none; }
            main > section { animation: none; opacity: 1; transform: none; } /* Ensure sections are visible */
            #demoCanvas { display: none; } /* Hide potentially distracting canvas */
            #canvas-container::after { /* Add placeholder text */
                 content: "Canvas animation disabled due to reduced motion preference.";
                 display: flex;
                 align-items: center;
                 justify-content: center;
                 height: 100%;
                 color: var(--color-secondary);
                 font-style: italic;
            }
        }


        /* 8. Responsive Design */
        @media (max-width: 992px) {
            h1 { font-size: 2.2rem; }
            h2 { font-size: 1.8rem; }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column; /* Stack header items */
                align-items: flex-start; /* Align to left */
            }
            .main-nav ul {
                margin-top: var(--spacing-unit); /* Add space below logo/theme */
                gap: var(--spacing-unit); /* Reduce gap */
                justify-content: center; /* Center nav items */
                width: 100%;
            }
            .theme-switcher {
                position: absolute; /* Move theme switcher */
                top: calc(var(--spacing-unit) * 1.25);
                right: var(--spacing-unit);
                margin-left: 0;
            }
            h1 { font-size: 2rem; }
            h2 { font-size: 1.6rem; }
            .projects-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }

        @media (max-width: 576px) {
            body { font-size: 0.95rem; }
            main { padding: var(--spacing-unit); }
            .container { padding-left: 0.5rem; padding-right: 0.5rem; }
            .button { padding: 0.4rem 0.8rem; font-size: 0.9rem; }
            .main-nav ul {
                gap: 0.8rem;
                font-size: 0.95rem;
            }
             .theme-switcher {
                 top: calc(var(--spacing-unit) * 1.1);
             }
        }

    </style>
    <!-- ** CSS END ** -->
</head>
<body data-theme="light"> <!-- Default theme, JS will override from LocalStorage -->

    <!-- App Container for Layout -->
    <div id="app-container">

        <!-- Header -->
        <header class="app-header">
            <div class="container header-content">
                <a href="#home" class="logo">
                     <!-- Simple inline SVG Icon -->
                     <svg class="icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                       <path d="M50,5 L95,27 L95,73 L50,95 L5,73 L5,27 Z M50,15 L15,32 V68 L50,85 V15 Z M85,32 L50,48 V85 L85,67 V32 Z M50,48 L15,32 L50,15 L85,32 L50,48 Z"/>
                     </svg>
                    Modern Static
                </a>
                <nav class="main-nav" aria-label="Main Navigation">
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#projects">Projects</a></li>
                        <li><a href="#api-demo">API Demo</a></li>
                        <li><a href="#canvas-demo">Canvas</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </nav>
                <div class="theme-switcher">
                    <button class="theme-toggle-button" id="theme-toggle" title="Toggle theme" aria-label="Toggle light/dark theme">
                        <!-- Sun Icon -->
                        <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.166 7.758a.75.75 0 001.06 1.06l1.591-1.59a.75.75 0 00-1.06-1.061L6.166 7.758z"/></svg>
                        <!-- Moon Icon -->
                        <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-3.51 1.713-6.63 4.362-8.472a.75.75 0 01.819.162z" clip-rule="evenodd"/></svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main id="main-content">
            <!-- Sections will be loaded here by the router -->
            <section id="home" data-route="home" class="active">
                <h1>Welcome to the Modern Static Showcase!</h1>
                <p>This page demonstrates various web technologies running entirely client-side.</p>
                <p>Navigate using the links above to explore different features.</p>
                <button class="button pulse-button" id="pulse-demo-button">Pulse Button</button>
            </section>

            <section id="about" data-route="about">
                <h2>About This Demo</h2>
                <p>This single HTML file combines HTML5, advanced CSS3 (including variables, flexbox, grid, animations, and themes), and modern JavaScript (ES6+) to create a dynamic experience without a backend.</p>
                <p>Features include:</p>
                <ul>
                    <li>Client-side routing using URL hash fragments.</li>
                    <li>Light/Dark theme switching persisted in Local Storage.</li>
                    <li>Fetching and displaying data from external APIs (GitHub).</li>
                    <li>Dynamic DOM manipulation.</li>
                    <li>Responsive design for various screen sizes.</li>
                    <li>Basic canvas animation.</li>
                    <li>Consideration for accessibility (semantic HTML, reduced motion).</li>
                </ul>
            </section>

            <section id="projects" data-route="projects">
                <h2>Projects Showcase</h2>
                <p>Fetching repository data dynamically from the GitHub API.</p>
                <label for="github-username">GitHub Username:</label>
                <input type="text" id="github-username" value="octocat" style="max-width: 200px; display: inline-block; margin-right: 10px;">
                <button class="button button-secondary" id="fetch-repos-button">Fetch Repos</button>
                <div class="projects-grid" id="projects-grid-container">
                    <div class="loading-indicator">Enter a GitHub username and click "Fetch Repos".</div>
                    <!-- Project cards will be inserted here -->
                </div>
            </section>

            <section id="api-demo" data-route="api-demo">
                <h2>Public API Demo</h2>
                <p>Fetching data from a simple public JSON placeholder API.</p>
                <button class="button" id="fetch-api-button">Fetch Random User Data</button>
                <div class="api-data" id="api-data-container">
                    Click the button to fetch data...
                </div>
            </section>

            <section id="canvas-demo" data-route="canvas-demo">
                 <h2>Canvas API Demo</h2>
                 <p>A simple particle animation using the HTML Canvas API.</p>
                 <div id="canvas-container">
                    <canvas id="demoCanvas"></canvas>
                 </div>
                 <p class="text-center"><small>(Animation might be disabled if 'prefers-reduced-motion' is enabled)</small></p>
            </section>

            <section id="contact" data-route="contact">
                <h2>Contact Form (Demo)</h2>
                <p>This is a demonstration form. Submission is handled client-side and data is logged to the console (not actually sent).</p>
                <form id="contact-form" class="contact-form">
                    <div>
                        <label for="name">Name:</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div>
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div>
                        <label for="message">Message:</label>
                        <textarea id="message" name="message" required></textarea>
                    </div>
                    <button type="submit" class="button">Send Message (Demo)</button>
                    <div class="form-status" id="form-status"></div>
                </form>
            </section>

        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <div class="container">
                <p>Â© <span id="current-year"></span> Modern Static Showcase. Built purely with HTML, CSS, and JS.</p>
                <p>Powered by GitHub Pages. Check the <a href="https://github.com/features/pages" target="_blank" rel="noopener noreferrer">GitHub Pages documentation</a>.</p>
            </div>
        </footer>
    </div> <!-- End #app-container -->

    <!-- ** JAVASCRIPT START ** -->
    <script>
        // Wrap in IIFE to avoid polluting global scope
        (function() {
            'use strict';

            // --- CONFIGURATION ---
            const GITHUB_API_BASE = 'https://api.github.com';
            const PLACEHOLDER_API = 'https://jsonplaceholder.typicode.com/users/'; // Example public API

            // --- DOM Elements ---
            const mainContent = document.getElementById('main-content');
            const navLinks = document.querySelectorAll('.main-nav a');
            const themeToggleButton = document.getElementById('theme-toggle');
            const body = document.body;
            const currentYearSpan = document.getElementById('current-year');
            const fetchReposButton = document.getElementById('fetch-repos-button');
            const githubUsernameInput = document.getElementById('github-username');
            const projectsGridContainer = document.getElementById('projects-grid-container');
            const fetchApiButton = document.getElementById('fetch-api-button');
            const apiDataContainer = document.getElementById('api-data-container');
            const contactForm = document.getElementById('contact-form');
            const formStatus = document.getElementById('form-status');
            const pulseButton = document.getElementById('pulse-demo-button');
            const canvas = document.getElementById('demoCanvas');
            const canvasContainer = document.getElementById('canvas-container');
            let ctx = null; // Canvas context
            let particles = []; // Canvas particles array
            let animationFrameId = null; // For cancelling canvas animation


            // --- THEME HANDLING ---
            const LOCAL_STORAGE_THEME_KEY = 'staticShowcaseTheme';

            function applyTheme(theme) {
                body.setAttribute('data-theme', theme);
                localStorage.setItem(LOCAL_STORAGE_THEME_KEY, theme);
                 // Update meta theme-color if needed (more complex for dynamic themes)
                 // const themeColorMeta = document.querySelector('meta[name="theme-color"]');
                 // if (themeColorMeta) { themeColorMeta.content = (theme === 'dark' ? '#1a1a1a' : '#ffffff'); }
            }

            function toggleTheme() {
                const currentTheme = body.getAttribute('data-theme') || 'light';
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                applyTheme(newTheme);
            }

            function loadSavedTheme() {
                const savedTheme = localStorage.getItem(LOCAL_STORAGE_THEME_KEY);
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

                if (savedTheme) {
                    applyTheme(savedTheme);
                } else if (prefersDark) {
                    applyTheme('dark');
                } else {
                    applyTheme('light'); // Default
                }
            }

            // --- ROUTING ---
            function handleRouteChange() {
                const hash = window.location.hash || '#home'; // Default to home
                const route = hash.substring(1); // Remove '#'

                // Hide all sections first
                mainContent.querySelectorAll('section').forEach(section => {
                    section.classList.remove('active');
                });

                // Show the target section
                const targetSection = mainContent.querySelector(`section[data-route="${route}"]`);
                if (targetSection) {
                    targetSection.classList.add('active');
                    // Update active state in nav
                    updateNavActiveState(hash);
                     // Scroll to top of main content on route change
                     // mainContent.scrollTop = 0; // Might not work reliably if main isn't scroll container
                     window.scrollTo({ top: 0, behavior: 'auto' }); // Scroll window top instead

                     // Stop canvas animation if navigating away
                     if (route !== 'canvas-demo' && animationFrameId) {
                         cancelAnimationFrame(animationFrameId);
                         animationFrameId = null;
                         console.log('Canvas animation stopped.');
                     }
                     // Start canvas animation if navigating to it
                     if (route === 'canvas-demo' && !animationFrameId && supportsCanvas()) {
                          initCanvas();
                     }

                } else {
                    // Fallback for invalid hash: go to home
                    const homeSection = mainContent.querySelector(`section[data-route="home"]`);
                    if (homeSection) homeSection.classList.add('active');
                    updateNavActiveState('#home');
                    window.location.hash = '#home'; // Correct the URL
                }
            }

            function updateNavActiveState(activeHash) {
                navLinks.forEach(link => {
                    if (link.getAttribute('href') === activeHash) {
                        link.classList.add('active');
                        link.setAttribute('aria-current', 'page');
                    } else {
                        link.classList.remove('active');
                        link.removeAttribute('aria-current');
                    }
                });
            }

            // --- API Fetching ---
            async function fetchGitHubRepos(username) {
                projectsGridContainer.innerHTML = '<div class="loading-indicator">Loading repositories...</div>';
                try {
                    const response = await fetch(`${GITHUB_API_BASE}/users/${username}/repos?sort=updated&per_page=6`);
                    if (!response.ok) {
                        throw new Error(`GitHub API Error: ${response.status} ${response.statusText}`);
                    }
                    const repos = await response.json();
                    displayRepos(repos);
                } catch (error) {
                    console.error("Failed to fetch GitHub repos:", error);
                    projectsGridContainer.innerHTML = `<div class="loading-indicator error">Failed to load repositories for '${username}'. Check username or API rate limits.</div>`;
                }
            }

            function displayRepos(repos) {
                if (!repos || repos.length === 0) {
                     projectsGridContainer.innerHTML = '<div class="loading-indicator">No public repositories found for this user.</div>';
                     return;
                }
                projectsGridContainer.innerHTML = ''; // Clear previous content
                repos.forEach(repo => {
                    const card = document.createElement('div');
                    card.className = 'card project-card';
                    card.innerHTML = `
                        <h3>${repo.name}</h3>
                        <p>${repo.description || 'No description provided.'}</p>
                        <a href="${repo.html_url}" target="_blank" rel="noopener noreferrer" class="button button-secondary button-small">View on GitHub</a>
                    `;
                    projectsGridContainer.appendChild(card);
                });
            }

            async function fetchPlaceholderData() {
                apiDataContainer.textContent = 'Fetching data...';
                 const randomUserId = Math.floor(Math.random() * 10) + 1; // Fetch user 1-10
                try {
                    const response = await fetch(PLACEHOLDER_API + randomUserId);
                    if (!response.ok) {
                         throw new Error(`API Error: ${response.status} ${response.statusText}`);
                    }
                    const data = await response.json();
                    apiDataContainer.textContent = JSON.stringify(data, null, 2); // Pretty print JSON
                } catch (error) {
                    console.error("Failed to fetch placeholder data:", error);
                    apiDataContainer.textContent = `Error fetching data: ${error.message}`;
                }
            }


            // --- FORM HANDLING ---
            function handleContactFormSubmit(event) {
                event.preventDefault(); // Prevent actual form submission
                const formData = new FormData(contactForm);
                const name = formData.get('name');
                const email = formData.get('email');
                const message = formData.get('message');

                console.log("Form Submitted (Demo):", { name, email, message });

                formStatus.textContent = `Demo: Thank you, ${name}! Your message would be sent (but this is static).`;
                contactForm.reset(); // Clear the form

                // Clear status message after a delay
                setTimeout(() => { formStatus.textContent = ''; }, 5000);
            }

            // --- WEB ANIMATIONS API EXAMPLE ---
            function animatePulseButton() {
                 if (typeof pulseButton.animate === 'function') { // Check for browser support
                     pulseButton.animate([
                         // Keyframes
                         { transform: 'scale(1)', opacity: 1 },
                         { transform: 'scale(1.05)', opacity: 0.8 },
                         { transform: 'scale(1)', opacity: 1 }
                     ], {
                         // Timing options
                         duration: 1000,
                         iterations: 1,
                         easing: 'ease-in-out'
                     });
                 } else {
                     console.log('Web Animations API not fully supported.');
                 }
            }

             // --- CANVAS ANIMATION ---
             function supportsCanvas() {
                return !!(canvas && canvas.getContext);
             }

             function initCanvas() {
                 if (!supportsCanvas()) {
                     console.error("Canvas not supported or not found.");
                     if(canvasContainer) canvasContainer.innerHTML = "<p class='text-center error'>Canvas is not supported by your browser.</p>";
                     return;
                 }
                 ctx = canvas.getContext('2d');
                 resizeCanvas();
                 createParticles();
                 if (!animationFrameId) { // Start animation loop only if not already running
                     animateParticles();
                     console.log('Canvas animation started.');
                 }
             }

             function resizeCanvas() {
                 if (!canvas || !canvasContainer) return;
                 // Use ResizeObserver if available for better container-based resizing
                 canvas.width = canvasContainer.clientWidth;
                 canvas.height = canvasContainer.clientHeight;
             }

             function createParticles() {
                 particles = [];
                 const particleCount = Math.min(Math.floor(canvas.width / 15), 70); // Adjust count based on width
                 for (let i = 0; i < particleCount; i++) {
                     particles.push({
                         x: Math.random() * canvas.width,
                         y: Math.random() * canvas.height,
                         vx: (Math.random() - 0.5) * 1.5, // Slower speed
                         vy: (Math.random() - 0.5) * 1.5,
                         radius: Math.random() * 2 + 1, // Smaller radius
                         color: `rgba(${Math.random() > 0.5 ? '0, 123, 255' : '23, 162, 184'}, ${Math.random() * 0.5 + 0.3})` // Use theme-like colors with alpha
                     });
                 }
             }

             function animateParticles() {
                 if (!ctx) return; // Exit if context is lost

                 // Check if reduced motion is preferred
                 const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                 if (prefersReducedMotion) {
                     // Optionally draw a static scene or just clear
                     ctx.clearRect(0, 0, canvas.width, canvas.height);
                      // Add placeholder text directly on canvas (alternative to CSS ::after)
                      ctx.fillStyle = getComputedStyle(body).getPropertyValue('--color-secondary').trim() || '#6c757d';
                      ctx.font = 'italic 14px ' + getComputedStyle(body).getPropertyValue('--font-family-sans-serif').trim();
                      ctx.textAlign = 'center';
                      ctx.fillText("Canvas animation disabled", canvas.width / 2, canvas.height / 2);
                      animationFrameId = null; // Ensure it doesn't loop
                     return; // Stop animation loop
                 }


                 ctx.clearRect(0, 0, canvas.width, canvas.height);

                 particles.forEach(p => {
                     // Update position
                     p.x += p.vx;
                     p.y += p.vy;

                     // Boundary collision (wrap around)
                     if (p.x < -p.radius) p.x = canvas.width + p.radius;
                     if (p.x > canvas.width + p.radius) p.x = -p.radius;
                     if (p.y < -p.radius) p.y = canvas.height + p.radius;
                     if (p.y > canvas.height + p.radius) p.y = -p.radius;

                     // Draw particle
                     ctx.beginPath();
                     ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                     ctx.fillStyle = p.color;
                     ctx.fill();
                 });

                 // Connect nearby particles (simple implementation)
                 ctx.strokeStyle = 'rgba(150, 150, 150, 0.1)'; // Very faint lines
                 ctx.lineWidth = 0.5;
                 for (let i = 0; i < particles.length; i++) {
                     for (let j = i + 1; j < particles.length; j++) {
                         const dx = particles[i].x - particles[j].x;
                         const dy = particles[i].y - particles[j].y;
                         const distance = Math.sqrt(dx * dx + dy * dy);
                         const maxDistance = 80; // Max distance to draw line

                         if (distance < maxDistance) {
                             ctx.beginPath();
                             ctx.moveTo(particles[i].x, particles[i].y);
                             ctx.lineTo(particles[j].x, particles[j].y);
                              // Adjust line opacity based on distance (optional)
                              // ctx.strokeStyle = `rgba(150, 150, 150, ${1 - distance / maxDistance * 0.9})`;
                             ctx.stroke();
                         }
                     }
                 }


                 animationFrameId = requestAnimationFrame(animateParticles);
             }


            // --- INITIALIZATION ---
            function init() {
                // Set current year in footer
                if(currentYearSpan) {
                    currentYearSpan.textContent = new Date().getFullYear();
                }

                // Load theme
                loadSavedTheme();

                // Set up routing
                handleRouteChange(); // Initial route check
                window.addEventListener('hashchange', handleRouteChange);

                // Add event listeners
                if (themeToggleButton) {
                    themeToggleButton.addEventListener('click', toggleTheme);
                }

                if (fetchReposButton && githubUsernameInput) {
                    fetchReposButton.addEventListener('click', () => {
                        const username = githubUsernameInput.value.trim();
                        if (username) {
                            fetchGitHubRepos(username);
                        } else {
                             projectsGridContainer.innerHTML = '<div class="loading-indicator">Please enter a GitHub username.</div>';
                        }
                    });
                     // Optional: Fetch on Enter key press in input
                     githubUsernameInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            fetchReposButton.click();
                        }
                     });
                }

                if (fetchApiButton) {
                    fetchApiButton.addEventListener('click', fetchPlaceholderData);
                }

                if (contactForm) {
                    contactForm.addEventListener('submit', handleContactFormSubmit);
                }

                if (pulseButton) {
                     pulseButton.addEventListener('click', animatePulseButton);
                }

                 // Initialize Canvas only if the route is active initially or supported
                 if (supportsCanvas() && window.location.hash === '#canvas-demo') {
                     initCanvas();
                 }
                 // Add resize listener for canvas
                 window.addEventListener('resize', resizeCanvas); // Re-check size on window resize

                console.log("Modern Static Showcase Initialized!");
            }

            // Run initialization when the DOM is ready
            document.addEventListener('DOMContentLoaded', init);

        })();
    </script>
    <!-- ** JAVASCRIPT END ** -->

    <!--
    =========================================
    PWA Manifest Content (manifest.json)
    =========================================
    Place this content in a file named `manifest.json` in the root directory.

    {
      "name": "Modern Static Showcase",
      "short_name": "StaticShowcase",
      "description": "A demo single-page static website.",
      "start_url": ".",
      "display": "standalone",
      "background_color": "#ffffff",
      "theme_color": "#007bff",
      "icons": [
        {
          "src": "icon-192.png", // You need to create these icon files
          "sizes": "192x192",
          "type": "image/png",
          "purpose": "any maskable"
        },
        {
          "src": "icon-512.png", // You need to create these icon files
          "sizes": "512x512",
          "type": "image/png",
          "purpose": "any maskable"
        }
      ]
    }

    NOTE: You would need to create the actual icon-192.png and icon-512.png files.
    For a true single-file solution, icons could be embedded as data URIs within the manifest,
    but this makes the manifest less standard and potentially problematic. Linking is standard practice.

    =========================================
    Service Worker Concept (sw.js) - NOT EMBEDDED
    =========================================
    A simple service worker (`sw.js`) for basic offline caching would look something like this:

    const CACHE_NAME = 'static-showcase-v1';
    const URLS_TO_CACHE = [
      '/', // Alias for index.html
      '/index.html',
      '/manifest.json', // Cache the manifest
      // Add paths to your icon files here if needed
      // '/icon-192.png',
      // '/icon-512.png'
      // NOTE: CSS and JS are IN index.html, so caching '/' or '/index.html' covers them.
    ];

    self.addEventListener('install', event => {
      event.waitUntil(
        caches.open(CACHE_NAME)
          .then(cache => {
            console.log('Opened cache');
            return cache.addAll(URLS_TO_CACHE);
          })
      );
    });

    self.addEventListener('fetch', event => {
      event.respondWith(
        caches.match(event.request)
          .then(response => {
            // Cache hit - return response
            if (response) {
              return response;
            }
            // Not in cache - fetch from network
            return fetch(event.request);
          }
        )
      );
    });

    // Optional: Activation step to clean up old caches
    self.addEventListener('activate', event => {
      const cacheWhitelist = [CACHE_NAME];
      event.waitUntil(
        caches.keys().then(cacheNames => {
          return Promise.all(
            cacheNames.map(cacheName => {
              if (cacheWhitelist.indexOf(cacheName) === -1) {
                return caches.delete(cacheName);
              }
            })
          );
        })
      );
    });

    // You would need to register this service worker in the main JS:
    // if ('serviceWorker' in navigator) {
    //   window.addEventListener('load', () => {
    //     navigator.serviceWorker.register('/sw.js')
    //       .then(registration => console.log('ServiceWorker registration successful with scope: ', registration.scope))
    //       .catch(error => console.log('ServiceWorker registration failed: ', error));
    //   });
    // }
    -->

</body>
</html>
